<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ø·Ø§Ù„Ø¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        .fade-in { animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; opacity: 0; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        
        .shake-lock { animation: shakeRed 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shakeRed {
            10%, 90% { transform: translate3d(-1px, 0, 0); border-color: #ef4444; background-color: #fef2f2; }
            20%, 80% { transform: translate3d(2px, 0, 0); border-color: #ef4444; }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); border-color: #ef4444; }
            40%, 60% { transform: translate3d(4px, 0, 0); border-color: #ef4444; }
        }

        .lesson-checkbox:checked + .lesson-card {
            border-color: #2563eb;
            background-color: #eff6ff;
            transform: scale(1.01);
        }
        .lesson-checkbox:checked + .lesson-card .check-circle {
            background-color: #2563eb;
            border-color: #2563eb;
        }
        .check-circle::after { content: 'âœ“'; color: white; font-size: 14px; display: block; text-align: center; line-height: 24px; }

        .slide-up-out { animation: slideUpOut 0.7s cubic-bezier(0.87, 0, 0.13, 1) forwards; }
        @keyframes slideUpOut { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-100%); opacity: 0; } }
        
        .is-hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        .is-visible { opacity: 1; visibility: visible; pointer-events: auto; }
        
        .lock-badge { position: absolute; top: 10px; left: 10px; background: #fee2e2; color: #dc2626; padding: 4px; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 pb-24 select-none overflow-x-hidden">

    <div id="lockToast" class="fixed top-20 left-1/2 transform -translate-x-1/2 z-[60] bg-red-600 text-white px-6 py-3 rounded-full shadow-xl flex items-center gap-2 transition-all duration-300 opacity-0 translate-y-[-20px] pointer-events-none">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
        <span class="font-bold text-sm">Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù…ØºÙ„Ù‚ Ù…Ø¤Ù‚ØªØ§Ù‹ ğŸ”’</span>
    </div>

    <section id="welcomeScreen" class="fixed inset-0 z-[100] bg-white flex flex-col items-center justify-center p-6 text-center">
        <div class="mb-10 animate-bounce">
            <div class="w-24 h-24 md:w-32 md:h-32 bg-blue-600 rounded-3xl rotate-12 flex items-center justify-center shadow-2xl mx-auto">
                <span class="text-5xl md:text-6xl text-white">ğŸ“</span>
            </div>
        </div>
        <h1 class="text-4xl md:text-6xl font-black text-gray-800 mb-2 tracking-tight">Ù…Ù†ØµØ© Ø§Ù„Ø·Ø§Ù„Ø¨</h1>
        <p class="text-gray-500 text-sm md:text-xl mb-12 max-w-md">Ø±ÙÙŠÙ‚Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„ØªÙÙˆÙ‚ ÙÙŠ Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</p>
        <button onclick="enterPlatform()" class="group relative px-8 py-4 md:px-12 md:py-5 bg-blue-600 text-white font-bold rounded-full shadow-lg shadow-blue-200 transition-all hover:scale-105 active:scale-95 text-lg md:text-xl overflow-hidden">
            <span class="relative z-10">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø© ğŸš€</span>
            <div class="absolute inset-0 h-full w-full bg-blue-700 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-300"></div>
        </button>
    </section>

    <header id="mainHeader" class="bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-40 px-4 md:px-8 py-4 flex justify-between items-center transition-all duration-500 opacity-0">
        <div class="flex items-center gap-3 cursor-pointer" onclick="goToHome()">
            <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center text-blue-600 font-bold text-xl">ğŸ“</div>
            <span class="text-xl md:text-2xl font-black text-blue-700">Ù…Ù†ØµØ© Ø§Ù„Ø·Ø§Ù„Ø¨</span>
        </div>
        <button onclick="goToHome()" class="p-2 md:p-3 rounded-full hover:bg-gray-100 transition" title="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
            <svg class="w-6 h-6 md:w-7 md:h-7 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
        </button>
    </header>

    <main id="mainContainer" class="container mx-auto px-4 md:px-8 py-6 md:py-10 max-w-6xl transition-all duration-500 opacity-0 min-h-screen">
        
        <div id="homeView" class="hidden fade-in">
            <div class="bg-gradient-to-r from-blue-600 to-blue-500 rounded-3xl p-6 md:p-10 text-white mb-10 shadow-xl shadow-blue-200 flex flex-col md:flex-row items-center justify-between gap-6">
                <div class="text-center md:text-right">
                    <h1 class="text-2xl md:text-4xl font-bold mb-3">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ø¨Ø·Ù„ ğŸ‘‹</h1>
                    <p class="text-blue-100 text-sm md:text-lg">Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø°Ø§ÙƒØ±Ø©ØŸ Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø© ÙˆØ§Ù†Ø·Ù„Ù‚ Ù†Ø­Ùˆ Ø§Ù„ØªÙÙˆÙ‚.</p>
                </div>
                <div class="hidden md:block text-6xl">ğŸ“š</div>
            </div>
            <h2 class="text-xl md:text-2xl font-bold mb-6 flex items-center gap-3 text-gray-800">
                <span class="w-1.5 h-8 bg-blue-600 rounded-full"></span> Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©
            </h2>
            <div id="subjectsGrid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-5"></div>
        </div>

        <div id="modeView" class="hidden fade-in min-h-[60vh] flex flex-col items-center justify-center">
            <div class="w-full max-w-2xl">
                <button onclick="goBack('homeView')" class="mb-8 text-gray-500 flex items-center gap-2 font-bold text-base md:text-lg hover:text-blue-600 transition w-fit px-4 py-2 rounded-lg hover:bg-gray-100">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                    Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙˆØ§Ø¯
                </button>
                
                <h2 id="selectedSubjectTitle" class="text-3xl md:text-5xl font-black text-center mb-12 text-gray-800"></h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full">
                    <div id="pdfModeCard" onclick="checkLockAndStart('pdf')" class="group relative bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl border-2 border-transparent hover:border-red-100 transition-all cursor-pointer flex flex-col items-center text-center gap-4 h-full transform hover:-translate-y-1">
                        <span id="pdfCountBadge" class="absolute top-4 right-4 bg-red-50 text-red-600 text-xs font-bold px-3 py-1 rounded-full border border-red-100 transition-opacity">0 Ù…Ù„Ù</span>
                        <div class="w-16 h-16 md:w-20 md:h-20 bg-red-50 group-hover:bg-red-100 rounded-full flex items-center justify-center text-3xl md:text-4xl transition-colors">ğŸ“‚</div>
                        <div>
                            <h3 class="font-bold text-xl md:text-2xl text-gray-800 mb-2">Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</h3>
                            <p class="text-sm md:text-base text-gray-500">Ù…Ø°ÙƒØ±Ø§ØªØŒ Ù…Ù„Ø®ØµØ§ØªØŒ ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø§Øª PDF</p>
                        </div>
                    </div>
                    
                    <div id="quizModeCard" onclick="checkLockAndStart('quiz')" class="group relative bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl border-2 border-transparent hover:border-green-100 transition-all cursor-pointer flex flex-col items-center text-center gap-4 h-full transform hover:-translate-y-1">
                        <span id="quizCountBadge" class="absolute top-4 right-4 bg-green-50 text-green-600 text-xs font-bold px-3 py-1 rounded-full border border-green-100 transition-opacity">0 Ø³Ø¤Ø§Ù„</span>
                        <div class="w-16 h-16 md:w-20 md:h-20 bg-green-50 group-hover:bg-green-100 rounded-full flex items-center justify-center text-3xl md:text-4xl transition-colors">ğŸ“</div>
                        <div>
                            <h3 class="font-bold text-xl md:text-2xl text-gray-800 mb-2">Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h3>
                            <p class="text-sm md:text-base text-gray-500">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ© Ø´Ø§Ù…Ù„Ø©</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="lessonView" class="hidden fade-in max-w-3xl mx-auto">
             <div class="sticky top-[72px] md:top-[88px] z-30 bg-gray-50/95 backdrop-blur py-4 mb-6 flex justify-between items-center border-b border-gray-200">
                <button onclick="goBack('modeView')" class="text-sm md:text-base font-bold text-gray-500 hover:text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-200 transition">âœ• Ø¥Ù„ØºØ§Ø¡</button>
                <h2 class="text-xl md:text-2xl font-bold">Ø§Ø®ØªØ± Ø§Ù„Ø¯Ø±ÙˆØ³</h2>
                <button onclick="toggleSelectAll()" id="selectAllBtn" class="text-sm md:text-base font-bold text-blue-600 hover:bg-blue-50 px-3 py-1 rounded-lg transition">ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„</button>
            </div>
            <div id="lessonsList" class="space-y-4 pb-32"></div>
            <div id="startQuizContainer" class="fixed bottom-8 left-0 right-0 flex justify-center z-50 smooth-fade is-hidden">
                <button onclick="startMultiLessonQuiz()" class="w-[90%] md:w-auto md:min-w-[300px] bg-blue-600 text-white font-bold py-4 px-8 rounded-2xl shadow-2xl shadow-blue-300 flex justify-between md:justify-center md:gap-6 items-center hover:bg-blue-700 hover:scale-105 transition transform">
                    <span class="text-lg">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¢Ù†</span>
                    <span id="selectedCountBadge" class="bg-white/20 text-white text-sm px-3 py-1 rounded-lg font-mono">0</span>
                </button>
            </div>
        </div>

        <div id="quizView" class="hidden fade-in max-w-3xl mx-auto">
             <div class="flex justify-between items-center mb-8">
                <span id="quizProgress" class="text-sm md:text-base font-bold bg-gray-200 px-4 py-2 rounded-lg text-gray-700 font-mono">1 / 10</span>
                <button onclick="finishQuizEarly()" class="text-sm md:text-base font-bold text-red-500 border border-red-200 px-4 py-2 rounded-lg hover:bg-red-50 hover:border-red-300 transition">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
            </div>
            <div id="quizContent" class="bg-white p-6 md:p-10 rounded-3xl shadow-sm border border-gray-100">
                <div class="mb-6">
                    <span id="lessonSourceBadge" class="inline-block bg-yellow-50 text-yellow-800 text-xs md:text-sm font-bold px-3 py-1.5 rounded-lg border border-yellow-100"></span>
                </div>
                <h3 id="questionText" class="text-2xl md:text-3xl font-bold mb-10 leading-relaxed text-gray-800"></h3>
                <div id="optionsContainer" class="space-y-3 md:space-y-4"></div>
            </div>
            <div id="quizResult" class="hidden text-center py-10 fade-in max-w-2xl mx-auto">
                <div class="w-32 h-32 bg-blue-50 rounded-full flex items-center justify-center text-6xl mx-auto mb-8 animate-bounce">ğŸ†</div>
                <h3 class="text-3xl md:text-4xl font-bold mb-4 text-gray-800">Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h3>
                <div class="text-6xl md:text-7xl font-black text-blue-600 my-8 dir-ltr font-mono"><span id="finalScorePercent">0</span>%</div>
                <div class="grid grid-cols-2 gap-4 md:gap-8 text-base md:text-lg mb-12">
                    <div class="bg-green-50 p-6 rounded-2xl border border-green-100">
                        <div class="font-black text-green-600 text-3xl mb-1" id="resCorrect">0</div>
                        <div class="text-green-800 font-bold">Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©</div>
                    </div>
                    <div class="bg-red-50 p-6 rounded-2xl border border-red-100">
                        <div class="font-black text-red-600 text-3xl mb-1" id="resWrong">0</div>
                        <div class="text-red-800 font-bold">Ø£Ø®Ø·Ø§Ø¡</div>
                    </div>
                </div>
                <div class="flex gap-4">
                    <button onclick="goToHome()" class="flex-1 bg-gray-800 hover:bg-gray-900 text-white py-4 rounded-xl font-bold shadow-lg transition transform hover:-translate-y-1">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                    <button onclick="goBack('modeView')" class="flex-1 bg-white border-2 border-gray-200 text-gray-700 py-4 rounded-xl font-bold hover:bg-gray-50 transition">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
                </div>
            </div>
        </div>

        <div id="pdfView" class="hidden fade-in max-w-4xl mx-auto">
             <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl md:text-3xl font-bold flex items-center gap-3">
                    <span class="text-3xl">ğŸ“š</span> Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©
                </h2>
                <button onclick="goBack('modeView')" class="text-base font-bold text-blue-600 hover:bg-blue-50 px-4 py-2 rounded-lg transition">Ø¹ÙˆØ¯Ø©</button>
            </div>
            <div id="pdfList" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </div>

    </main>

    <footer id="mainFooter" class="fixed bottom-0 left-0 w-full bg-white/90 backdrop-blur border-t border-gray-200 py-4 text-center text-xs md:text-sm text-gray-500 z-30 smooth-fade is-hidden">
        <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2025 Ù…Ù†ØµØ© Ø§Ù„Ø·Ø§Ù„Ø¨ <span class="mx-1">|</span> Ø¥Ø¹Ø¯Ø§Ø¯: <span class="font-bold text-blue-600">Ø¹Ù„ÙŠ ÙŠØ§Ø³Ø± Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯</span></p>
    </footer>

    <script type="module" src="js/script.js"></script>
</body>
</html>